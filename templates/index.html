<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/static/images/logo-tab.png">
    <title>Edgardo Paz-Romero | Portfolio</title>
    <style>
        :root {
            --navy: #0a192f;
            --light-navy: #112240;
            --lightest-navy: #233554;
            --slate: #8892b0;
            --light-slate: #a8b2d1;
            --lightest-slate: #ccd6f6;
            --white: #e6f1ff;
            --green: #64ffda;
            --shadow: rgba(2, 12, 27, 0.7);
            font-size: 16px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--navy);
            color: var(--slate);
            line-height: 1.6;
            overflow-x: hidden;
        }

        a {
            color: inherit;
        }

        main {
            width: min(1000px, 90vw);
            margin: 0 auto;
            padding-bottom: 8rem;
        }

        .noise-overlay {
            position: fixed;
            inset: 0;
            pointer-events: none;
            background-image: url('https://grainy-gradients.vercel.app/noise.svg');
            opacity: 0.08;
            mix-blend-mode: screen;
            z-index: 1;
        }

        header {
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(12px);
            background: rgba(10, 25, 47, 0.8);
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }

        .nav-container {
            width: min(1100px, 92vw);
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.2rem 0;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: var(--green);
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }

        .logo img {
            display: block;
            height: 44px;
            width: auto;
            filter: drop-shadow(0 6px 12px rgba(100, 255, 218, 0.25));
            transition: transform 0.3s ease, filter 0.3s ease;
        }

        .logo:hover img,
        .logo:focus-visible img {
            transform: translateY(-2px) scale(1.03);
            filter: drop-shadow(0 10px 18px rgba(100, 255, 218, 0.4));
        }

        nav ul {
            display: flex;
            gap: 1.5rem;
            list-style: none;
            align-items: center;
        }

        nav a {
            color: var(--lightest-slate);
            text-decoration: none;
            font-size: 0.95rem;
            position: relative;
            padding: 0.6rem 0.4rem;
            transition: color 0.3s ease;
        }

        nav a span {
            color: var(--green);
            font-size: 0.75rem;
            letter-spacing: 0.1em;
            margin-right: 0.3rem;
            text-transform: uppercase;
        }

        nav a::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 2px;
            background: var(--green);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }

        nav a:hover,
        nav a:focus,
        nav a.active {
            color: var(--green);
        }

        nav a.active::after,
        nav a:hover::after {
            transform: scaleX(1);
        }

        .resume-link {
            border: 1px solid var(--green);
            border-radius: 4px;
            padding: 0.5rem 1rem;
            color: var(--green);
        }

        section {
            padding: 0;
            margin: 0;
        }

        .section-wrapper {
            padding: 6rem 0;
            position: relative;
        }

        .section-title {
            font-size: clamp(1.8rem, 3vw, 2.4rem);
            color: var(--lightest-slate);
            margin-bottom: 2rem;
            display: flex;
            align-items: baseline;
            gap: 1rem;
        }

        .section-title span {
            color: var(--green);
            font-size: 1rem;
            letter-spacing: 0.08em;
        }

        .hero-eyebrow {
            color: var(--green);
            font-size: 0.95rem;
            margin-bottom: 1.2rem;
            letter-spacing: 0.08em;
        }

        .hero-title {
            font-size: clamp(2.8rem, 8vw, 4.8rem);
            font-weight: 800;
            color: var(--lightest-slate);
        }

        .hero-subtitle {
            font-size: clamp(2rem, 6vw, 3.2rem);
            color: var(--light-slate);
            margin: 0.6rem 0 1.5rem;
        }

        .hero-description {
            max-width: 540px;
            margin-bottom: 2.5rem;
        }

        .hero-cta {
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            border: 1px solid var(--green);
            color: var(--green);
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 600;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .hero-cta:hover {
            background: rgba(100, 255, 218, 0.1);
        }

        .about-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
            align-items: flex-start;
        }

        .highlight {
            color: var(--lightest-slate);
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(120px, 1fr));
            gap: 0.6rem 1.2rem;
            list-style: none;
        }

        .skills-grid li::before {
            content: '▹';
            color: var(--green);
            margin-right: 0.6rem;
        }

        .profile-frame {
            border: 2px solid var(--green);
            border-radius: 8px;
            padding: 0.75rem;
            position: relative;
            transition: transform 0.3s ease;
        }

        .profile-frame::after {
            content: '';
            position: absolute;
            inset: 10px;
            border-radius: 6px;
            background: rgba(100, 255, 218, 0.08);
            z-index: -1;
        }

        .profile-frame img {
            width: 100%;
            border-radius: 6px;
            display: block;
        }

        .profile-frame:hover {
            transform: translate(-6px, -6px);
        }

        .experience-layout {
            display: grid;
            grid-template-columns: 220px auto;
            gap: 2.5rem;
        }

        .experience-tabs {
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--lightest-navy);
        }

        .experience-tab {
            position: relative;
            padding: 0.75rem 1rem;
            cursor: pointer;
            color: var(--slate);
            background: transparent;
            border: none;
            text-align: left;
            font-size: 0.95rem;
            transition: color 0.3s ease, background 0.3s ease;
        }

        .experience-tab.active {
            color: var(--green);
            background: rgba(100, 255, 218, 0.1);
        }

        .experience-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -1px;
            width: 2px;
            height: 100%;
            background: var(--green);
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.3s ease;
        }

        .experience-tab.active::before {
            transform: scaleY(1);
        }

        .experience-role {
            color: var(--lightest-slate);
            font-size: 1.2rem;
            margin-bottom: 0.2rem;
        }

        .experience-company {
            color: var(--green);
        }

        .experience-time {
            font-size: 0.9rem;
            margin-bottom: 1rem;
            color: var(--light-slate);
        }

        .experience-list {
            list-style: none;
        }

        .experience-list li {
            position: relative;
            padding-left: 1.6rem;
            margin-bottom: 1rem;
        }

        .experience-list li::before {
            content: '▹';
            position: absolute;
            left: 0;
            color: var(--green);
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .project-card {
            background: var(--light-navy);
            border-radius: 6px;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            box-shadow: 0 20px 30px -15px var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .project-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 40px -20px var(--shadow);
        }

        .project-card h3 {
            color: var(--lightest-slate);
            font-size: 1.4rem;
        }

        .project-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
        }

        .tech-list {
            display: flex;
            gap: 0.8rem;
            flex-wrap: wrap;
            color: var(--slate);
        }

        .external-links a {
            color: var(--light-slate);
            margin-left: 0.8rem;
            transition: color 0.3s ease;
            text-decoration: none;
        }

        .external-links a:hover {
            color: var(--green);
        }

        .contact-section {
            text-align: center;
            max-width: 560px;
            margin: 0 auto;
            padding: 6rem 0 0;
        }

        .contact-section h2 {
            color: var(--lightest-slate);
            font-size: clamp(2rem, 5vw, 3rem);
            margin-bottom: 1.2rem;
        }

        .contact-section p {
            margin-bottom: 2rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            align-items: center;
            margin-top: 1rem;
        }

        .social-link {
            width: 48px;
            height: 48px;
            border: 1px solid var(--green);
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: var(--green);
            text-decoration: none;
            transition: transform 0.3s ease, background 0.3s ease, color 0.3s ease;
        }

        .social-link:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateY(-4px);
            color: var(--lightest-slate);
        }

        .social-link svg {
            width: 22px;
            height: 22px;
            fill: currentColor;
            display: block;
        }

        footer {
            text-align: center;
            padding: 3rem 0;
            color: var(--light-slate);
            font-size: 0.85rem;
        }

        .page-section {
            scroll-margin-top: 110px;
        }

        @media (max-width: 900px) {
            .about-grid {
                grid-template-columns: 1fr;
            }

            .experience-layout {
                grid-template-columns: 1fr;
            }

            .experience-tabs {
                display: grid;
                grid-auto-flow: column;
                overflow-x: auto;
            }

            .experience-tab {
                white-space: nowrap;
            }
        }

        @media (max-width: 640px) {
            nav ul {
                display: none;
            }

            .nav-container {
                justify-content: center;
            }

            .hero-title {
                font-size: clamp(2.4rem, 9vw, 3.2rem);
            }

            main {
                width: 88vw;
            }
        }
    </style>
</head>
<body>
    <div class="noise-overlay"></div>
    <header>
        <div class="nav-container">
            <a href="/" class="logo" aria-label="Home">
                <img src="/static/images/white-temple-logo.png" alt="Temple University logo" />
            </a>
            <nav>
                <ul>
                    <li><a href="/" data-section="home"><span>01.</span> Home</a></li>
                    <li><a href="/about-me" data-section="about"><span>02.</span> About</a></li>
                    <li><a href="/projects" data-section="projects"><span>03.</span> Projects</a></li>
                    <li><a class="resume-link" href="/static/images/Edgardo_Paz_Romero_Resume.pdf" target="_blank" rel="noopener">Resume</a></li>
                </ul>
            </nav>
        </div>
    </header>


    <main id="root"></main>

    <script>
        window.initialSection = "{{ initial_section or '' }}";
    </script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
    // {% raw %}
        const { useState, useEffect, useMemo, useRef, useCallback } = React;

        const SECTION_ROUTE_MAP = {
            home: '/',
            projects: '/projects',
            about: '/about-me'
        };

        const ROUTE_SECTION_MAP = {
            '/': 'home',
            '/projects': 'projects',
            '/about-me': 'about'
        };

        const skills = [
            'Python',
            'Flask',
            'Git',
            'Typer',
            'API Integration',
            'Java',
            'Linux',
            'Docker',
            'Requests',
            'C',
        ];

        const experiences = [
            {
                id: 'altheros',
                company: 'Altheros Capital',
                title: 'Front-End Developer Intern',
                range: 'Sept 2025 — Dec 2025',
                description: [
                    'Built and maintained React.js components using JSX and standard CSS to deliver responsive user features.',
                    'Turned wireframes into functional interfaces with designers, speeding up design-to-deployment.',
                    'Created mobile-friendly, accessible layouts that improved usability across devices.',
                    'Supported agile workflows through reviews, testing, and standups to improve collaboration.'
                ]
            },
            {
                id: 'linneman',
                company: 'Linneman Associates',
                title: 'Web Consultant',
                range: 'Jun 2025 — Present',
                description: [
                    'Maintain Wix sites serving thousands daily, ensuring accuracy and uptime.',
                    'Implement content/design updates, improving usability and client satisfaction.',
                    'Translate business needs into technical changes with faster turnaround.',
                    'Troubleshoot layout/configuration to minimize downtime across sites.',
                ]
            },
            {
                id: 'carfagno',
                company: 'Zom Technologies',
                title: 'Software Engineer Intern',
                range: 'May 2025 - Sept 2025',
                description: [
                    'Developed responsive user interfaces in React with TSX, enhancing mobile usability',
                    'Linked frontend with mock APIs, ensuring consistent real-time data handling.',
                    'Partnered with designers to streamline workflows, reducing clicks for key tasks.',
                    'Documented test plans that de-risked future deployments.'
                ]
            }
        ];

        const featuredProjects = [
            {
                "title": "J-Sniff",
                "description": "A high-concurrency HTTP proxy server architected from scratch using Java 21 Virtual Threads and raw sockets to intercept and log network traffic without external dependencies.",
                "tech": ["Java 21", "Virtual Threads", "Raw Sockets", "Multithreading"],
                links: {
                    github: 'https://github.com/edgardopaz/j-sniff'
                }
            },
            {
                title: 'Flask Flashcards',
                description: 'Minimalist study companion with persistent storage, deck organization, and lightning-fast review sessions.',
                tech: ['Flask', 'SQLite', 'HTML/CSS', 'Python'],
                links: {
                    video: 'https://youtu.be/mn_0jnpJ9TM?si=D8Dml3QqNQecGF0L'
                }
            },
            {
                title: 'Wiki Race Bot',
                description: 'Developed a Python automation bot using BeautifulSoup and SBERT to solve WikiRace paths between Wikipedia pages.',
                tech: ['Python', 'BeautifulSoup', 'SBERT', 'Requests'],
                links: {
                    github:'https://github.com/edgardopaz/wiki-race-bot'
                }
            }
        ];

        function updateActiveNav(section) {
            document.querySelectorAll('nav a[data-section]').forEach((link) => {
                if (link.dataset.section === section) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }

        function HeroSection() {
            return (
                <section id="home" className="section-wrapper page-section" data-section-id="home">
                    <p className="hero-eyebrow">Hi, my name is</p>
                    <h1 className="hero-title">Edgardo Paz-Romero.</h1>
                    <h2 className="hero-subtitle">I build things that make life easier.</h2>
                        <p className="hero-description">
                            I am a driven, first-generation Computer Science student at Temple 
                            University dedicated to software that can change lives. From working on a 
                            software team for a stock advice platform to successfully building an AI
                            form-coaching application at a recent hackathon, my work centers on
                            using current technology to empower users. I build applications that matter.
                        </p>
                    <a className="hero-cta" href="/projects" data-section="projects">Check out my work →</a>
                </section>
            );
        }

        function AboutSection() {
            return (
                <section id="about" className="section-wrapper page-section" data-section-id="about">
                    <h2 className="section-title"><span>01.</span> About Me</h2>
                    <div className="about-grid">
                        <div>
                            <p>
                                Hey! I'm Edgardo and I have always been drawn to creating things that help people. I started
                                coding during my freshman year at Temple and quickly fell in love with combining <span className="highlight">logical solutions, design 
                                skills, and automation</span> to build tools with real impact.
                            </p>
                            <br />
                            <p>
                                Lately, I've been focused on translating potential solutions into dependable
                                applications, a skill demonstrated by my recent work in developing a script to automate WikiRaces and a CLI tool to 
                                quickly retrieve real-time stock prices. I thrive in collaborative environments with tight 
                                feedback loops on projects that ultimately empower underserved communities.
                            </p>
                            <br />
                            <p>Here are a few technologies I've been working with recently:</p>
                            <ul className="skills-grid">
                                {skills.map((skill) => (
                                    <li key={skill}>{skill}</li>
                                ))}
                            </ul>
                        </div>
                        <div>
                            <div className="profile-frame">
                                <img src="static/images/profile.jpg" alt="Edgardo Paz-Romero" />
                            </div>
                        </div>
                    </div>
                </section>
            );
        }

        function ExperienceSection() {
            const [activeId, setActiveId] = useState(experiences[0].id);
            const activeExperience = useMemo(
                () => experiences.find((experience) => experience.id === activeId) || experiences[0],
                [activeId]
            );

            return (
                <section id="experience" className="section-wrapper">
                    <h2 className="section-title"><span>02.</span> Where I've Worked</h2>
                    <div className="experience-layout">
                        <div className="experience-tabs">
                            {experiences.map((experience) => (
                                <button
                                    key={experience.id}
                                    type="button"
                                    className={`experience-tab ${experience.id === activeId ? 'active' : ''}`.trim()}
                                    onClick={() => setActiveId(experience.id)}
                                >
                                    {experience.company}
                                </button>
                            ))}
                        </div>
                        <div>
                            <h3 className="experience-role">
                                {activeExperience.title}{' '}
                                <span className="experience-company">@ {activeExperience.company}</span>
                            </h3>
                            <p className="experience-time">{activeExperience.range}</p>
                            <ul className="experience-list">
                                {activeExperience.description.map((item) => (
                                    <li key={item}>{item}</li>
                                ))}
                            </ul>
                        </div>
                    </div>
                </section>
            );
        }

        function ProjectsSection() {
            return (
                <section id="projects" className="section-wrapper page-section" data-section-id="projects">
                    <h2 className="section-title"><span>03.</span> Some Things I've Built</h2>
                    <div className="projects-grid">
                        {featuredProjects.map((project) => (
                            <article key={project.title} className="project-card">
                                <div>
                                    <h3>{project.title}</h3>
                                    <p>{project.description}</p>
                                </div>
                                <div className="tech-list">
                                    {project.tech.map((tech) => (
                                        <span key={tech}>{tech}</span>
                                    ))}
                                </div>
                                <div className="project-footer">
                                    <span>Featured Project</span>
                                    <div className="external-links">
                                        {project.links.live && (
                                            <a href={project.links.live} target="_blank" rel="noopener noreferrer">Live ↗</a>
                                        )}
                                        {project.links.video && (
                                            <a href={project.links.video} target="_blank" rel="noopener noreferrer">Video ↗</a>
                                        )}
                                        {project.links.github && (
                                            <a href={project.links.github} target="_blank" rel="noopener noreferrer">Github ↗</a>
                                        )}
                                    </div>
                                </div>
                            </article>
                        ))}
                    </div>
                </section>
            );
        }

        function ContactSection() {
            return (
                <section id="contact" className="contact-section">
                    <span className="hero-eyebrow">04. What's Next?</span>
                    <h2>Get In Touch</h2>
                    <p>
                        I'm currently looking for internship opportunities and collaborative projects. Whether you have a question
                        or just want to say hi, my inbox is always open — I'll get back to you as soon as I can.
                    </p>
                    <div className="social-links">
                        <a
                            className="social-link"
                            href="https://github.com/edgardopaz"
                            target="_blank"
                            rel="noopener noreferrer"
                            aria-label="GitHub"
                        >
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M12 .5a11.5 11.5 0 0 0-3.64 22.41c.58.11.79-.25.79-.56v-2.17c-3.22.7-3.9-1.55-3.9-1.55-.53-1.34-1.3-1.7-1.3-1.7-1.06-.74.08-.73.08-.73 1.18.08 1.8 1.22 1.8 1.22 1.04 1.78 2.73 1.26 3.39.96.11-.76.41-1.26.75-1.55-2.57-.29-5.27-1.29-5.27-5.73 0-1.27.46-2.31 1.21-3.13-.12-.3-.53-1.5.11-3.11 0 0 .99-.32 3.24 1.19a11.2 11.2 0 0 1 5.9 0c2.26-1.51 3.24-1.19 3.24-1.19.64 1.61.24 2.81.12 3.11.75.82 1.21 1.86 1.21 3.13 0 4.45-2.71 5.43-5.29 5.72.42.37.8 1.1.8 2.22v3.29c0 .31.21.68.8.56A11.5 11.5 0 0 0 12 .5Z" />
                            </svg>
                        </a>
                        <a
                            className="social-link"
                            href="https://www.linkedin.com/in/edgardopazromero"
                            target="_blank"
                            rel="noopener noreferrer"
                            aria-label="LinkedIn"
                        >
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.226.792 24 1.771 24h20.451C23.2 24 24 23.226 24 22.271V1.729C24 .774 23.2 0 22.225 0ZM7.12 20.452H3.562V9h3.558Zm-1.78-13.03a2.063 2.063 0 1 1 0-4.127 2.063 2.063 0 0 1 0 4.126ZM20.452 20.452h-3.557v-5.605c0-1.337-.027-3.061-1.866-3.061-1.868 0-2.155 1.46-2.155 2.969v5.697H9.317V9h3.414v1.561h.049c.476-.9 1.637-1.848 3.37-1.848 3.6 0 4.27 2.37 4.27 5.456Z" />
                            </svg>
                        </a>
                        <a
                            className="social-link"
                            href="mailto:edgardopazromero@gmail.com"
                            aria-label="Email"
                        >
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M3 5.5h18c.83 0 1.5.67 1.5 1.5v10c0 .83-.67 1.5-1.5 1.5H3c-.83 0-1.5-.67-1.5-1.5v-10c0-.83.67-1.5 1.5-1.5Zm0 2.03V17h18V7.53l-9 5.25-9-5.25Zm9 3.72 8.85-5.17H3.15L12 11.25Z" />
                            </svg>
                        </a>
                    </div>
                </section>
            );
        }

        function Footer() {
            return (
                <footer>
                    Built with Flask • © {new Date().getFullYear()} Edgardo Paz-Romero
                </footer>
            );
        }

        function PortfolioPage() {
            const initialSectionFromWindow = (window.initialSection || '').trim();
            const resolvedInitialSection =
                ROUTE_SECTION_MAP[window.location.pathname] || initialSectionFromWindow || 'home';

            const [activeSection, setActiveSection] = useState(resolvedInitialSection);
            const activeSectionRef = useRef(resolvedInitialSection);
            const sectionRefs = useRef({});
            const observerLockRef = useRef(false);
            const lockTimeoutRef = useRef(null);

            const registerSectionRef = useCallback(
                (sectionId) => (element) => {
                    if (element) {
                        sectionRefs.current[sectionId] = element;
                    }
                },
                []
            );

            const scrollToSection = useCallback((sectionId, { instant = false } = {}) => {
                const sectionElement = sectionRefs.current[sectionId];
                if (sectionElement) {
                    sectionElement.scrollIntoView({ behavior: instant ? 'auto' : 'smooth', block: 'start' });
                }
            }, []);

            useEffect(() => {
                const sectionElements = document.querySelectorAll('.page-section');
                sectionElements.forEach((element) => {
                    const sectionId = element.dataset.sectionId;
                    if (sectionId) {
                        registerSectionRef(sectionId)(element);
                    }
                });
            }, [registerSectionRef]);

            useEffect(() => {
                const target = resolvedInitialSection;
                observerLockRef.current = true;
                requestAnimationFrame(() => {
                    scrollToSection(target, { instant: true });
                    const expectedPath = SECTION_ROUTE_MAP[target] || '/';
                    if (window.location.pathname !== expectedPath) {
                        window.history.replaceState({ section: target }, '', expectedPath);
                    } else {
                        window.history.replaceState({ section: target }, '', window.location.pathname);
                    }
                    updateActiveNav(target);
                    if (lockTimeoutRef.current) {
                        clearTimeout(lockTimeoutRef.current);
                    }
                    lockTimeoutRef.current = window.setTimeout(() => {
                        observerLockRef.current = false;
                    }, 500);
                });
            }, [resolvedInitialSection, scrollToSection]);

            useEffect(() => {
                const handlePopState = (event) => {
                    const sectionId = event.state?.section || ROUTE_SECTION_MAP[window.location.pathname] || 'home';
                    activeSectionRef.current = sectionId;
                    setActiveSection(sectionId);
                    updateActiveNav(sectionId);
                    observerLockRef.current = true;
                    scrollToSection(sectionId);
                    if (lockTimeoutRef.current) {
                        clearTimeout(lockTimeoutRef.current);
                    }
                    lockTimeoutRef.current = window.setTimeout(() => {
                        observerLockRef.current = false;
                    }, 600);
                };

                window.addEventListener('popstate', handlePopState);
                return () => window.removeEventListener('popstate', handlePopState);
            }, [scrollToSection]);

            useEffect(() => {
                const observer = new IntersectionObserver(
                    (entries) => {
                        const visibleEntry = entries
                            .filter((entry) => entry.isIntersecting)
                            .sort((a, b) => b.intersectionRatio - a.intersectionRatio)[0];

                        if (observerLockRef.current) {
                            return;
                        }

                        if (visibleEntry) {
                            const newSection = visibleEntry.target.dataset.sectionId;
                            if (newSection && newSection !== activeSectionRef.current) {
                                activeSectionRef.current = newSection;
                                setActiveSection(newSection);
                                updateActiveNav(newSection);
                                const targetPath = SECTION_ROUTE_MAP[newSection];
                                if (targetPath && window.location.pathname !== targetPath) {
                                    window.history.replaceState({ section: newSection }, '', targetPath);
                                }
                            }
                        }
                    },
                    { threshold: 0.55, rootMargin: '-20% 0px -20% 0px' }
                );

                const sections = document.querySelectorAll('.page-section');
                sections.forEach((section) => observer.observe(section));

                return () => observer.disconnect();
            }, []);

            useEffect(() => {
                const links = document.querySelectorAll('a[data-section]');
                const handleClick = (event) => {
                    event.preventDefault();
                    const sectionId = event.currentTarget.dataset.section;
                    const targetPath = SECTION_ROUTE_MAP[sectionId];
                    if (targetPath && window.location.pathname !== targetPath) {
                        window.history.pushState({ section: sectionId }, '', targetPath);
                    }
                    activeSectionRef.current = sectionId;
                    setActiveSection(sectionId);
                    updateActiveNav(sectionId);
                    observerLockRef.current = true;
                    scrollToSection(sectionId);
                    if (lockTimeoutRef.current) {
                        clearTimeout(lockTimeoutRef.current);
                    }
                    lockTimeoutRef.current = window.setTimeout(() => {
                        observerLockRef.current = false;
                    }, 600);
                };

                links.forEach((link) => link.addEventListener('click', handleClick));

                return () => {
                    links.forEach((link) => link.removeEventListener('click', handleClick));
                };
            }, [scrollToSection]);

            useEffect(() => {
                return () => {
                    if (lockTimeoutRef.current) {
                        clearTimeout(lockTimeoutRef.current);
                    }
                };
            }, []);

            return (
                <>
                    <HeroSection />
                    <AboutSection />
                    <ExperienceSection />
                    <ProjectsSection />
                    <ContactSection />
                    <Footer />
                </>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<PortfolioPage />);
   // {% endraw %}
    </script>
</body>
</html>
